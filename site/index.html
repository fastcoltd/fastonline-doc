<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>首页 - FASTRESP</title>
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/antd/4.24.10/antd.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link rel="stylesheet" href="_style.css">
    <link rel="stylesheet" href="_site.css">
</head>
<body>
<!-- 头部 -->
<div class="container">
    <div w3-include-html="_header.html"></div>
</div>

<!-- 主内容 -->
<div class="container">
    <!-- 服务分类 -->
    <div class="service-menu" id="service-menu"></div>

    <!-- 轮播图 -->
    <div class="carousel">
        <div class="carousel-item" style="opacity: 1;">社媒营销 - 提升您的品牌影响力</div>
        <div class="carousel-item" style="opacity: 0;">软件开发 - 定制您的专属解决方案</div>
        <div class="carousel-item" style="opacity: 0;">SEO优化 - 让您的网站脱颖而出</div>
    </div>

    <!-- 热门平台 -->
    <div class="scroll-section">
        <h2 class="section-title">热门平台</h2>
        <div id="hot-platforms" class="scroll-list"></div>
        <div class="scroll-arrow left" onclick="scrollList('hot-platforms', -1)"><i class="fas fa-chevron-left"></i></div>
        <div class="scroll-arrow right" onclick="scrollList('hot-platforms', 1)"><i class="fas fa-chevron-right"></i></div>
    </div>

    <!-- 热门服务 -->
    <div class="scroll-section">
        <h2 class="section-title">热门服务</h2>
        <div id="hot-services" class="scroll-list"></div>
        <div class="scroll-arrow left" onclick="scrollList('hot-services', -1)"><i class="fas fa-chevron-left"></i></div>
        <div class="scroll-arrow right" onclick="scrollList('hot-services', 1)"><i class="fas fa-chevron-right"></i></div>
    </div>

    <!-- 热门商品 -->
    <div class="card-container">
        <h2 class="section-title">热门商品</h2>
        <div id="hot-products" class="card-list"></div>
    </div>

    <!-- 热门店铺 -->
    <div class="card-container">
        <h2 class="section-title">热门店铺</h2>
        <div id="hot-shops" class="card-list"></div>
    </div>

    <!-- 热门精选 -->
    <div class="card-container">
        <h2 class="section-title">热门精选</h2>
        <div id="hot-albums" class="card-list"></div>
    </div>

    <!-- 热门文章 -->
    <div class="card-container">
        <h2 class="section-title">热门文章</h2>
        <div id="hot-articles" class="card-list"></div>
    </div>

    <!-- 精选评价 -->
    <div class="card-container">
        <h2 class="section-title">精选评价</h2>
        <div id="top-reviews" class="card-list"></div>
    </div>
</div>

<!-- 底部 -->
<div class="container">
    <div w3-include-html="_footer.html"></div>
</div>

<!-- 脚本 -->
<script src="https://www.w3schools.com/lib/w3.js"></script>
<script src="https://cdn.jsdelivr.net/npm/faker@5.5.3/dist/faker.min.js"></script>
<script src="_data.js"></script>
<script src="_common.js"></script>
<script src="_location.js"></script>
<script>
    // 配置和业务逻辑

    // 生成服务菜单
    function generateServiceMenu() {
        const menu = document.getElementById('service-menu');
        const categories = [
            {name: '社媒营销', sub: ['账号服务', '粉丝增长', '内容创作']},
            {name: 'SEO', sub: ['关键词优化', '排名提升', '网站分析']},
            {name: '软件开发', sub: ['定制开发', '技术支持', '应用维护']},
            {name: '设计', sub: ['平面设计', 'UI/UX', '品牌标识']},
            {name: '写作', sub: ['软文撰写', '技术文档', '创意写作']},
            {name: '广告', sub: ['广告投放', '营销策划', '数据分析']}
        ];
        categories.forEach(cat => {
            const div = document.createElement('div');
            div.className = 'level-1';
            div.innerHTML = `${cat.name}<div class="level-2">${cat.sub.map(sub => `<a href="#">${sub}</a>`).join('')}</div>`;
            menu.appendChild(div);
        });
    }

    // 生成登录弹窗内容
    function generateLoginModal() {
        return `
            <h3>登录</h3>
            <input type="text" placeholder="用户名"><br><br>
            <input type="password" placeholder="密码"><br><br>
            <button onclick="hideModal('login-modal')">登录</button>
            <p>或使用第三方登录: <a href="#">Google</a> | <a href="#">Facebook</a></p>
        `;
    }

    // 定义字段配置，热门平台：上部 logo，下部名称
    const platformFieldConfig = {
        logo: { type: 'image', style: { } }, // 上部 logo
        name: { type: 'text' ,style: { } } // 下部名称
    };

    // 定义字段配置，热门服务：icon + 文字组合
    const serviceFieldConfig = {
        icon: { type: 'icon', style: { } },
        title: { type: 'text', style: {} }
    };

    // 其他字段配置保持不变
    const productFieldConfig = {
        image: { type: 'image', position: 'header', style: { }, sample: i => getPicsumImage(300, 200, `product${i}`) },
        title: { type: 'text', position: 'header', style: {}, sample: () => faker.commerce.productName() },
        price: { type: 'text', label: '价格', format: v => `¥${v}`, style: {}, sample: () => faker.commerce.price(50, 200) },
        stock: { type: 'text', label: '库存', style: {}, sample: () => faker.datatype.number({ min: 10, max: 100 }) },
        rating: { type: 'rating', label: '评分', style: {}, sample: () => faker.datatype.float({ min: 4, max: 5, precision: 0.1 }) },
        sales: { type: 'text', label: '销量', style: {}, sample: () => faker.datatype.number({ min: 100, max: 500 }) },
        shopName: { type: 'text', label: '店铺', style: {}, sample: () => faker.company.companyName() },
        tags: { type: 'tag', label: '标签', style: {}, sample: () => faker.lorem.words(3).split(' ') }
    };

    const shopFieldConfig = {
        image: { type: 'image', position: 'header', style: {}, sample: i => getPicsumImage(300, 200, `shop${i}`) },
        name: { type: 'text', position: 'header', style: {}, sample: () => faker.company.companyName() },
        sales: { type: 'text', label: '销量', style: {}, sample: () => faker.datatype.number({ min: 300, max: 1000 }) },
        rating: { type: 'rating', label: '评分', style: {}, sample: () => faker.datatype.float({ min: 4, max: 5, precision: 0.1 }) },
        slogan: { type: 'text', label: '标语', style: {}, sample: () => faker.company.catchPhrase() },
        tags: { type: 'tag', label: '标签', style: {}, sample: () => faker.lorem.words(3).split(' ') }
    };

    const albumFieldConfig = {
        image: { type: 'image', position: 'header', style: {}, sample: i => getPicsumImage(300, 200, `album${i}`) },
        title: { type: 'text', position: 'header', style: {}, sample: () => faker.commerce.department() },
        productCount: { type: 'text', label: '商品数', style: {}, sample: () => faker.datatype.number({ min: 5, max: 20 }) },
        sales: { type: 'text', label: '销量', style: {}, sample: () => faker.datatype.number({ min: 200, max: 600 }) },
        orders: { type: 'text', label: '订单数', style: {}, sample: () => faker.datatype.number({ min: 50, max: 200 }) },
        favorites: { type: 'text', label: '收藏数', style: {}, sample: () => faker.datatype.number({ min: 100, max: 300 }) }
    };

    const articleFieldConfig = {
        image: { type: 'image', position: 'header', style: {}, sample: i => getPicsumImage(300, 200, `article${i}`) },
        title: { type: 'text', position: 'header', style: {}, sample: () => faker.lorem.sentence() },
        rating: { type: 'rating', label: '评分', style: {}, sample: () => faker.datatype.float({ min: 4, max: 5, precision: 0.1 }) },
        author: { type: 'text', label: '作者', style: {}, sample: () => faker.name.findName() }
    };

    const reviewFieldConfig = {
        image: { type: 'image', position: 'header', style: {}, sample: i => getPicsumImage(300, 200, `review${i}`) },
        title: { type: 'text', position: 'header', style: {}, sample: () => faker.commerce.productName() },
        service: { type: 'text', label: '服务', style: {}, sample: () => faker.commerce.department() },
        rating: { type: 'rating', label: '评分', style: {}, sample: () => faker.datatype.float({ min: 4, max: 5, precision: 0.1 }) },
        content: { type: 'text', label: '内容', style: {}, sample: () => faker.lorem.paragraph() }
    };

    // 配置数据
    const hotProducts = generateData(productFieldConfig, 15);
    const hotShops = generateData(shopFieldConfig, 15);
    const hotAlbums = generateData(albumFieldConfig, 10);
    const hotArticles = generateData(articleFieldConfig, 10);
    const topReviews = generateData(reviewFieldConfig, 5);

    // 生成样本数据的通用函数
    function generateData(fieldConfig, count) {
        return Array(count).fill().map((_, i) => {
            const item = { link: '#' };
            for (const [fieldName, config] of Object.entries(fieldConfig)) {
                item[fieldName] = typeof config.sample === 'function' ? config.sample(i) : config.sample;
            }
            return item;
        });
    }

    function scrollList(containerId, direction) {
        const list = document.getElementById(containerId);
        const scrollAmount = 7.5 * 2 * 16;
        list.scrollLeft += direction * scrollAmount;
        updateArrows(containerId);
    }

    function updateArrows(containerId) {
        const list = document.getElementById(containerId);
        const leftArrow = list.parentElement.querySelector('.scroll-arrow.left');
        const rightArrow = list.parentElement.querySelector('.scroll-arrow.right');
        const scrollLeft = list.scrollLeft;
        const scrollWidth = list.scrollWidth;
        const clientWidth = list.clientWidth;

        leftArrow.classList.toggle('hidden', scrollLeft === 0);
        rightArrow.classList.toggle('hidden', scrollLeft + clientWidth >= scrollWidth - 1);
    }

    window.onload = () => {
        w3.includeHTML(() => {
            generateServiceMenu();
            generateCards('hot-platforms', 'scroll', hotPlatforms, platformFieldConfig);
            generateCards('hot-services', 'scroll', hotServices, serviceFieldConfig);
            generateCards('hot-products', 'card', hotProducts, productFieldConfig);
            generateCards('hot-shops', 'card', hotShops, shopFieldConfig);
            generateCards('hot-albums', 'card', hotAlbums, albumFieldConfig);
            generateCards('hot-articles', 'card', hotArticles, articleFieldConfig);
            generateCards('top-reviews', 'card', topReviews, reviewFieldConfig);
            generateArticles('about-articles', 5, 8);
            generateArticles('buyer-articles', 5, 8);
            generateArticles('seller-articles', 5, 8);
            generateArticles('resource-articles', 5, 8);
            initCarousel();

            // 绑定弹窗事件
            let footChange = document.querySelectorAll('.footer-right a:not([target])')
            footChange[0].onclick = () => showModal('language-modal', generateSelectorModal('language'));
            footChange[1].onclick = () => showModal('timezone-modal', generateSelectorModal('timezone'));
            footChange[2].onclick = () => showModal('currency-modal', generateSelectorModal('currency'));

            // 初始化箭头状态并绑定滚动监听
            ['hot-platforms', 'hot-services'].forEach(id => {
                const list = document.getElementById(id);
                updateArrows(id);
                list.addEventListener('scroll', () => updateArrows(id));
            });
        });
    };
</script>
</body>
</html>