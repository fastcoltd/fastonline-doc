<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FASTRESP - 店铺常见问题</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/antd/4.24.14/antd.min.css" integrity="sha512-Kc2RX0r68yS5yJTuJLUW9RZ56XA8yXvQHIV7R25bHv35XGLQTSVqSAtcfmGrbXkuuKOlOEMA4iO2k2z7E5OuMSQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="_style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.4/moment.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment-timezone/0.5.43/moment-timezone-with-data.min.js"></script>
    <script src="https://www.w3schools.com/lib/w3.js"></script>
    <script src="_common.js"></script>
    <script src="_opt.js"></script>
    <style>
        .col-checkbox { width: 5%; min-width: 50px; }
        .col-id { width: 8%; min-width: 60px; }
        .col-store-id { width: 10%; min-width: 80px; }
        .col-item-id { width: 10%; min-width: 80px; }
        .col-status { width: 8%; min-width: 60px; }
        .col-language { width: 8%; min-width: 60px; }
        .col-question { width: 15%; min-width: 120px; }
        .col-answer { width: 15%; min-width: 120px; }
        .col-sort-index { width: 8%; min-width: 60px; }
        .col-create-time { width: 12%; min-width: 100px; }
        .col-actions { width: 12%; min-width: 100px; }
    </style>
</head>
<body>
<div class="container">
    <div id="header" w3-include-html="_header.html"></div>
    <div class="content-wrapper">
        <div id="sidebar" w3-include-html="_sidebar.html"></div>
        <div class="main-content">
            <div class="tabs-container">
                <div class="ant-tabs ant-tabs-top">
                    <div class="ant-tabs-nav" role="tablist">
                        <div class="ant-tabs-nav-wrap">
                            <div class="ant-tabs-nav-list">
                                <div class="ant-tabs-tab ant-tabs-tab-active" onclick="switchTab('store_faq.html')">
                                    <span class="ant-tabs-tab-btn">店铺常见问题</span>
                                    <div class="ant-tabs-ink-bar ant-tabs-ink-bar-animated" style="left: 0; width: 80px;"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="ant-tabs-content-holder">
                        <div class="ant-tabs-content ant-tabs-content-top">
                            <div class="ant-tabs-tabpane ant-tabs-tabpane-active">
                                <div class="filter-container"></div>
                                <div class="action-container"></div>
                                <div class="task-list">
                                    <div class="table-header"></div>
                                    <div id="store_faq-list">加载中...</div>
                                    <div class="pagination"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id="footer" w3-include-html="_footer.html"></div>
</div>

<script>
    function getRandomItem(arr) {
        return arr[Math.floor(Math.random() * arr.length)];
    }
    function randomInt(min, max) {
        return Math.floor(Math.random() * (max - min + 1)) + min;
    }

    // 模拟店铺和商品名称
    const storeNames = ['时尚服饰店', '电子产品店', '美食天地', '家居生活馆', '运动装备店'];
    const itemNames = ['T恤', '手机', '蛋糕', '沙发', '跑鞋'];

    // 多语言样本数据
    const faqData = {
        'zh_CN': {
            questions: ['如何退货？', '配送时间是多久？', '如何联系客服？', '商品保修多久？', '支付方式有哪些？'],
            answers: ['请联系客服申请退货。', '配送时间通常为3-5天。', '通过在线聊天联系客服。', '商品保修期为1年。', '支持支付宝和微信支付。']
        },
        'en_US': {
            questions: ['How to return an item?', 'How long is the delivery time?', 'How to contact support?', 'What is the warranty period?', 'What payment methods are available?'],
            answers: ['Please contact support to request a return.', 'Delivery time is usually 3-5 days.', 'Contact support via live chat.', 'Warranty period is 1 year.', 'Supports PayPal and credit cards.']
        },
        'fr_FR': {
            questions: ['Comment retourner un article ?', 'Combien de temps prend la livraison ?', 'Comment contacter le support ?', 'Quelle est la durée de la garantie ?', 'Quels modes de paiement sont disponibles ?'],
            answers: ['Contactez le support pour une demande de retour.', 'Le délai de livraison est de 3 à 5 jours.', 'Contactez le support via le chat en direct.', 'La garantie est de 1 an.', 'Supporte PayPal et cartes de crédit.']
        },
        'es_ES': {
            questions: ['¿Cómo devolver un artículo?', '¿Cuánto tiempo tarda la entrega?', '¿Cómo contactar al soporte?', '¿Cuál es el período de garantía?', '¿Qué métodos de pago están disponibles?'],
            answers: ['Contacta al soporte para solicitar una devolución.', 'El tiempo de entrega es de 3 a 5 días.', 'Contacta al soporte vía chat en vivo.', 'El período de garantía es de 1 año.', 'Soporta PayPal y tarjetas de crédito.']
        },
        'vi_VN': {
            questions: ['Làm sao để trả hàng?', 'Thời gian giao hàng bao lâu?', 'Làm sao liên hệ hỗ trợ?', 'Thời gian bảo hành bao lâu?', 'Phương thức thanh toán nào có sẵn?'],
            answers: ['Liên hệ hỗ trợ để yêu cầu trả hàng.', 'Thời gian giao hàng thường là 3-5 ngày.', 'Liên hệ hỗ trợ qua chat trực tiếp.', 'Thời gian bảo hành là 1 năm.', 'Hỗ trợ PayPal và thẻ tín dụng.']
        },
        'ru_RU': {
            questions: ['Как вернуть товар?', 'Сколько времени занимает доставка?', 'Как связаться с поддержкой?', 'Каков срок гарантии?', 'Какие способы оплаты доступны?'],
            answers: ['Свяжитесь с поддержкой для запроса возврата.', 'Доставка занимает 3-5 дней.', 'Свяжитесь с поддержкой через чат.', 'Срок гарантии - 1 год.', 'Поддерживает PayPal и кредитные карты.']
        }
    };

    window.tableConfig = {
        tableName: 'store_faq',
        tableTitle: '店铺常见问题',
        sampleCount: 200,
        defaultPerPage: 20,
        fields: [
            // 主表字段
            { name: 'id', isSystemField: true, generator: id => id },
            { name: 'store_id', generator: () => randomInt(1, 30) },
            { name: 'item_id', generator: () => randomInt(1, 50) },
            { name: 'status', generator: () => randomInt(0, 1) }, // 0:禁用, 1:启用
            { name: 'sort_index', generator: () => randomInt(0, 100) },
            { name: 'create_time', isSystemField: true, generator: () => moment().subtract(randomInt(1, 365), 'days').unix() },
            // 多语言表字段
            { name: 'id', isLangField: true, isSystemField: true, generator: id => id * 6 + randomInt(1, 6) },
            { name: 'faq_id', isLangField: true, generator: id => id },
            { name: 'version', isLangField: true, generator: () => randomInt(1, 5) },
            { name: 'language', isLangField: true, generator: (id, lang) => lang },
            { name: 'seo_keywords', isLangField: true, generator: (id, lang) => `${faqData[lang].questions[id % 5]}, FAQ ${id}` },
            { name: 'seo_description', isLangField: true, generator: (id, lang) => `Learn about ${faqData[lang].questions[id % 5]}` },
            { name: 'question', isLangField: true, generator: (id, lang) => `${faqData[lang].questions[id % 5]} #${id}` },
            { name: 'answer', isLangField: true, generator: (id, lang) => `${faqData[lang].answers[id % 5]} (ID: ${id})` },
            { name: 'create_time', isLangField: true, isSystemField: true, generator: () => moment().subtract(randomInt(1, 365), 'days').unix() },
            { name: 'update_time', isLangField: true, isSystemField: true, generator: () => moment().subtract(randomInt(1, 90), 'days').unix() },
            { name: 'site_reply', isLangField: true, generator: id => randomInt(0, 1) ? `回复 #${id}: 请查看详情` : '' }
        ],
        actionButtons: [
            { label: '添加', className: 'ant-btn ant-btn-primary', action: 'addRecord' },
            { label: '批量删除', className: 'ant-btn ant-btn-danger', action: 'batchDelete' },
            { label: '批量修改状态', className: 'ant-btn ant-btn-default', color: '#fa8c16', field: { name: 'status', label: '状态', type: 'select', options: [{ value: 0, label: '禁用' }, { value: 1, label: '启用' }] } },
            { label: '批量修改店铺', className: 'ant-btn ant-btn-default', color: '#1890ff', field: { name: 'store_id', label: '店铺', type: 'select', options: () => Array.from({ length: 15 }, (_, i) => ({ value: i + 1, label: `${storeNames[i % storeNames.length]} ${i + 1}` })) } },
            { label: '批量修改商品', className: 'ant-btn ant-btn-default', color: '#52c41a', field: { name: 'item_id', label: '商品', type: 'select', options: () => Array.from({ length: 15 }, (_, i) => ({ value: i + 1, label: `${itemNames[i % itemNames.length]} ${i + 1}` })) } }
        ],
        listFields: [
            { name: 'id', label: 'ID', className: 'col-id' },
            { name: 'store_id', label: '店铺', className: 'col-store-id', formatter: v => `${storeNames[v % storeNames.length]} (${v})` },
            { name: 'item_id', label: '商品', className: 'col-item-id', formatter: v => `${itemNames[v % itemNames.length]} (${v})` },
            { name: 'status', label: '状态', className: 'col-status', formatter: v => v === 0 ? '<span class="ant-tag ant-tag-red">禁用</span>' : '<span class="ant-tag ant-tag-green">启用</span>' },
            { name: 'language', label: '语言', className: 'col-language', isLangField: true },
            { name: 'question', label: '问题', className: 'col-question', isLangField: true },
            { name: 'answer', label: '回答', className: 'col-answer', isLangField: true },
            { name: 'sort_index', label: '排序', className: 'col-sort-index' },
            { name: 'create_time', label: '创建时间', className: 'col-create-time', formatter: v => moment.unix(v).format('YYYY-MM-DD HH:mm:ss') },
            { name: 'actions', label: '操作', className: 'col-actions', formatter: (_, item) => `
                <button class="ant-btn" onclick="editRecord(${item.id})" style="margin-right: 8px;">编辑</button>
                <button class="ant-btn ant-btn-danger" onclick="deleteRecord(${item.id})">删除</button>
            ` }
        ],
        filterFields: [
            { id: 'store_id', type: 'select', options: () => Array.from({ length: 15 }, (_, i) => ({ value: i + 1, label: `${storeNames[i % storeNames.length]} ${i + 1}` })), filter: (data, value) => value === '' ? data : data.filter(d => d.store_id === parseInt(value)) },
            { id: 'item_id', type: 'select', options: () => Array.from({ length: 15 }, (_, i) => ({ value: i + 1, label: `${itemNames[i % itemNames.length]} ${i + 1}` })), filter: (data, value) => value === '' ? data : data.filter(d => d.item_id === parseInt(value)) },
            { id: 'status', type: 'select', options: [{ value: '', label: '全部状态' }, { value: '0', label: '禁用' }, { value: '1', label: '启用' }], filter: (data, value) => value === '' ? data : data.filter(d => d.status === parseInt(value)) },
            { id: 'language', type: 'select', options: [{ value: '', label: '全部语言' }, { value: 'zh_CN', label: '中文' }, { value: 'en_US', label: '英语' }, { value: 'fr_FR', label: '法语' }, { value: 'es_ES', label: '西班牙语' }, { value: 'vi_VN', label: '越南语' }, { value: 'ru_RU', label: '俄语' }], filter: (data, value) => value ? data.filter(d => tableLangData.some(l => l.faq_id === d.id && l.language === value)) : data },
            { id: 'question', type: 'text', placeholder: '搜索问题', filter: (data, value) => value ? data.filter(d => tableLangData.some(l => l.faq_id === d.id && l.question.toLowerCase().includes(value.toLowerCase()))) : data },
            { id: 'startDate', type: 'date', filter: (data, value) => value ? data.filter(d => moment.unix(d.create_time).isSameOrAfter(value)) : data },
            { id: 'endDate', type: 'date', filter: (data, value) => value ? data.filter(d => moment.unix(d.create_time).isSameOrBefore(value)) : data }
        ],
        langFields: {
            foreignKey: 'faq_id',
            languages: ['zh_CN', 'en_US', 'fr_FR', 'es_ES', 'vi_VN', 'ru_RU']
        },
        modalTabs: [
            {
                id: 'basic',
                title: '基本信息',
                fields: [
                    { name: 'store_id', label: '店铺', type: 'select', options: () => Array.from({ length: 15 }, (_, i) => ({ value: i + 1, label: `${storeNames[i % storeNames.length]} ${i + 1}` })), showInAdd: true, showInEdit: true, editableInAdd: true, editableInEdit: true },
                    { name: 'item_id', label: '商品', type: 'select', options: () => Array.from({ length: 15 }, (_, i) => ({ value: i + 1, label: `${itemNames[i % itemNames.length]} ${i + 1}` })), showInAdd: true, showInEdit: true, editableInAdd: true, editableInEdit: true },
                    { name: 'status', label: '状态', type: 'select', options: [{ value: 0, label: '禁用' }, { value: 1, label: '启用' }], showInAdd: true, showInEdit: true, editableInAdd: true, editableInEdit: true },
                    { name: 'sort_index', label: '排序', type: 'number', showInAdd: true, showInEdit: true, editableInAdd: true, editableInEdit: true },
                    { name: 'id', label: 'ID', type: 'text', showInAdd: false, showInEdit: true, editableInAdd: false, editableInEdit: false },
                    { name: 'create_time', label: '创建时间', type: 'datetime-local', formatter: v => moment.unix(v).format('YYYY-MM-DDTHH:mm'), showInAdd: false, showInEdit: true, editableInAdd: false, editableInEdit: false }
                ]
            },
            {
                id: 'lang',
                title: '多语言信息',
                fields: [
                    { name: 'language', label: '语言', type: 'select', options: ['zh_CN', 'en_US', 'fr_FR', 'es_ES', 'vi_VN', 'ru_RU'].map(l => ({ value: l, label: l })), showInAdd: true, showInEdit: true, editableInAdd: true, editableInEdit: false },
                    { name: 'version', label: '版本', type: 'number', isLangField: true, showInAdd: true, showInEdit: true, editableInAdd: true, editableInEdit: true },
                    { name: 'seo_keywords', label: 'SEO关键词', type: 'text', isLangField: true, showInAdd: true, showInEdit: true, editableInAdd: true, editableInEdit: true },
                    { name: 'seo_description', label: 'SEO描述', type: 'text', isLangField: true, showInAdd: true, showInEdit: true, editableInAdd: true, editableInEdit: true },
                    { name: 'question', label: '问题', type: 'text', isLangField: true, showInAdd: true, showInEdit: true, editableInAdd: true, editableInEdit: true },
                    { name: 'answer', label: '回答', type: 'textarea', isLangField: true, showInAdd: true, showInEdit: true, editableInAdd: true, editableInEdit: true },
                    { name: 'site_reply', label: '站点回复', type: 'textarea', isLangField: true, showInAdd: true, showInEdit: true, editableInAdd: true, editableInEdit: true },
                    { name: 'create_time', label: '创建时间', type: 'datetime-local', isLangField: true, formatter: v => moment.unix(v).format('YYYY-MM-DDTHH:mm'), showInAdd: false, showInEdit: true, editableInAdd: false, editableInEdit: false },
                    { name: 'update_time', label: '更新时间', type: 'datetime-local', isLangField: true, formatter: v => moment.unix(v).format('YYYY-MM-DDTHH:mm'), showInAdd: false, showInEdit: true, editableInAdd: false, editableInEdit: false }
                ]
            }
        ]
    };

    // 支持 Enter 键触发查询
    document.addEventListener('keydown', (e) => {
        if (e.key === 'Enter' && document.activeElement.tagName === 'INPUT') {
            applyFilters();
        }
    });
</script>
</body>
</html>